<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Matematika AI</title>

  <!-- Favicon -->
  <link rel="icon" href="favicon.ico" type="image/x-icon" />

  <!-- FontAwesome & Main Styles -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css" />
  <link rel="stylesheet" href="style.css" />

  <!-- MathJax Configuration -->
<script>
  window.MathJax = {
    tex: {
      inlineMath: [['(', ')'], ['$', '$'], ['\\(', '\\)']],  // Support parentheses, dollar signs, and LaTeX-style delimiters
    },
    svg: {
      fontCache: 'global'  // Keep the global font cache
    }
  };

  // Wait for chat messages to appear and re-render math
  document.addEventListener("DOMContentLoaded", () => {
    function waitForChatMessages() {
      const messages = document.querySelector(".widget-window__MessagesContainer-sc-f1226038-0");
      if (messages && window.MathJax) {
        // Observer to trigger re-rendering math equations when content is added
        new MutationObserver(() => {
          // Using MathJax.typeset() for older versions of MathJax
          if (MathJax.typesetPromise) {
            MathJax.typesetPromise().catch(err => console.error("MathJax error:", err));
          } else if (MathJax.typeset) {
            MathJax.typeset(); // Fallback for older versions
          }
        }).observe(messages, { childList: true, subtree: true });
        // Initial render when page loads
        if (MathJax.typesetPromise) {
          MathJax.typesetPromise(); // For MathJax 3.x and later
        } else if (MathJax.typeset) {
          MathJax.typeset(); // Fallback for older versions
        }
      } else {
        setTimeout(waitForChatMessages, 500);
      }
    }

    waitForChatMessages();

    // Function to re-render MathJax when chatbot is toggled
    const chatbotButton = document.querySelector("#chatbot-toggle-button"); // Replace with your actual button selector
    chatbotButton.addEventListener("click", () => {
      // Delay to make sure DOM is updated after the toggle
      setTimeout(() => {
        // Re-render math equations
        if (MathJax.typesetPromise) {
          MathJax.typesetPromise().catch(err => console.error("MathJax error:", err));
        } else if (MathJax.typeset) {
          MathJax.typeset(); // Fallback for older versions
        }
      }, 300); // Adjust delay if necessary
    });
  });
</script>
<script async src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>


<body>

    <!-- Loading Screen -->
    <div class="loading-screen">
        <div class="loader"></div>
    </div>

    <!-- Cursor Effect -->
    <div class="custom-cursor"></div>

    <!-- Navigation -->
    <nav class="navbar">
        <div class="logo glow-text">Matematika AI</div>
        <div class="nav-toggle">
            <div class="bar"></div>
            <div class="bar"></div>
            <div class="bar"></div>
        </div>
        <ul class="nav-links">
            <li><a href="#home" class="glow-link">Pradžia</a></li>
            <li><a href="#about" class="glow-link">Matematiukas</a></li>
            <li><a href="#projects" class="glow-link">Patarimai</a></li>
            <li><a href="#contact" class="glow-link"></a></li>
        </ul>
        <button id="theme-toggle" class="theme-toggle glow-button">
            <i class="fas fa-moon"></i>
        </button>
    </nav>

    <!-- Notification System -->
    <div id="notification" class="notification"></div>

    <!-- Home Section -->
    <section id="home" class="home">
        <div class="particle-background"></div>
        <div class="content">
            <h1 class="glitch" data-text="Creative Developer">Matematika AI</h1>
            <p class="typing-text"></p><br/>
            <div class="cta-buttons"></div>
        </div>
    </section>

    <!-- About Section -->
    <section id="about" class="about">
        <h2 class="section-title glow-text">Matematiukas</h2>
        <div class="about-content">
            <div class="profile-card" data-tilt>
                <p>Susipažink su išmaniuoju matematikos padėjėju Matematiuku!</p>
                <p> </p><p> </p>
                <p>Tiesiog paspausk roboto mygtuką. Jis yra apačioje, dešinėje pusėje.</p>
                <p> </p><p> </p>
                <p>Jei nežinai kaip naudotis Matematiuku, pasižiūrėk patarimus!</p>
                <p>Esu įsitikinęs, jog ten rasi naudingos informacijos</p>
                <p> </p>
                <p> </p>
                <p> </p>
                <p> </p>
                <p> </p>
                <p> </p>
                <p> </p>
                <p> </p>
                <p> </p>
            </div>
        </div>
    </section>

    <!-- Projects Section -->
    <section id="projects" class="projects">
        <h2 class="section-title glow-text">Patarimai</h2>
        <div class="filter-buttons">
            <button class="filter-btn" data-filter="web">Pasirinkimas 1</button>
            <button class="filter-btn" data-filter="app">Pasirinkimas 2</button>
            <button class="filter-btn" data-filter="design">Pasirinkimas 3</button>
        </div>
        <div class="project-card" data-category="web">
            <div class="text-box">
                <h3>Informacija1</h3>
                <p>Čia gali būti antras teksto laukas.</p>
                <p> </p>
            </div>
        </div>
        <div class="project-card" data-category="app">
            <h3>Informacija2</h3>
            <p>Čia gali būti antras teksto laukas.</p>
            <p> </p>
        </div>
        <div class="project-card" data-category="design">
            <h3>Informacija3</h3>
            <p>Kaip apskaičiuoti $\frac{1}{2} \cdot \pi \cdot r^2$?
</p>
            <p> </p>
        </div>
    </section>

    <!-- Footer Section -->
    <footer class="footer">
        <p>&copy; 2025 Matematika AI.</p>
    </footer>

    <!-- JavaScript -->
    <script src="script.js"></script>

    <!-- Elfsight AI Chatbot -->
    <script src="https://static.elfsight.com/platform/platform.js" async></script>
    <div class="elfsight-app-53d68f67-a4ea-4aa8-8706-bf244fadf6b1" data-elfsight-app-lazy></div>
</body>
</html>
